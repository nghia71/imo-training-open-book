\documentclass[../01-divisibility.tex]{subfiles}

\begin{document}

\begin{example*}[\gls{IMO 2023}/P1]\label{example:IMO-2023-P1}\textbf{[\nameref{definition:5M}]}
    Xác định tất cả các số nguyên hợp dương \( n \) thỏa mãn tính chất sau: nếu các ước số dương của \( n \) là $1 = d_1 < d_2 < \dots < d_k = n,$
    thì $d_i \mid (d_{i+1} + d_{i+2}) \quad \text{với mọi } 1 \leq i \leq k - 2.$
\end{example*}

\begin{soln}(Cách 1)\footnotemark
    Theo \nameref{theorem:fundamental-theorem-of-arithmetic}, dễ thấy rằng \( n = p^r \) với \( r \geq 2 \) thỏa mãn điều kiện vì 
    \[
        d_i = p^{i-1},\ \text{với } 1 \leq i \leq k = r+1\ \text{và rõ ràng}\ p^{i-1} \mid (p^i + p^{i+1}).
    \]
    
    Bây giờ, giả sử tồn tại một số nguyên \( n \) thỏa mãn điều kiện đã cho và có ít nhất hai thừa số nguyên tố phân biệt,
    gọi là \( p \) và \( q \), với \( p < q \) là hai thừa số nguyên tố nhỏ nhất của \( n \).
    
    Tồn tại số nguyên \( j \) sao cho:
    \[
        d_1 = 1, d_2 = p, \dots, d_j = p^{j-1}, d_{j+1} = p^j, d_{j+2} = q.
    \]
    
    Ta cũng có:
    \[
        d_{k-j-1} = \frac{n}{q}, \quad d_{k-j} = \frac{n}{p^j}, \quad d_{k-j+1} = \frac{n}{p^{j-1}}, \dots, d_{k-1} = \frac{n}{p}, \quad d_k = n.
    \]
    
    Từ điều kiện đề bài:
    \[
        d_{k-j-1} \mid (d_{k-i} + d_{k-j+1}) \implies \frac{n}{q} \mid \left( \frac{n}{p^j} + \frac{n}{p^{j-1}} \right)  \quad (1)
    \]
    
    Suy ra $p^j \mid q(p+1)$ dẫn đến $p \mid q$, mâu thuẫn với $p \neq q$. Vậy \( n \) phải là lũy thừa của một số nguyên tố.
\end{soln}

\bigbreak

\begin{soln}(Cách 2)\footnotemark[\value{footnote}]
    Vì \( d_i d_{k+1-i} = n \), ta có:
    \[
        d_{k-i-1} \mid d_{k-i} + d_{k-i+1} \Longleftrightarrow \frac{n}{d_{i+2}} \mid \left( \frac{n}{d_{i+1}} + \frac{n}{d_i} \right).
    \]

    Nhân hai vế với \( d_i d_{i+1} d_{i+2} \) và đơn giản hóa:
    \[
        d_i d_{i+1} \mid d_i d_{i+2} + d_{i+1} d_{i+2} \implies d_i \mid d_{i+1} d_{i+2} \quad (2)
    \]
    
    Áp dụng điều kiện đề bài, ta có:
    \[
        d_i \mid d_{i+1} (d_{i+1} + d_{i+2}) = d_{i+1}^2 + d_{i+1} d_{i+2}.
    \]
    
    Kết hợp với (2), suy ra \( d_i \mid d_{i+1}^2 \) với mọi \( 1 \leq i \leq k - 2 \).
    
    Giả sử rằng \( d_2 = p \) là ước số nguyên tố nhỏ nhất của \( n \). Ta chứng minh bằng \nameref{theorem:induction-principle}:
    \begin{claim*}
        $p \mid d_i,\ \forall\ 2 \leq i \leq k - 1.$
    \end{claim*}
    \begin{subproof}
        Thật vậy, trường hợp $d_2 = p$ là hiển nhiên. Giả sử $p \mid d_j$ với $2 \le j \le k-2$, khi đó:
        \[
            p \mid d_j \mid {d_{j+1}}^2 \implies p \mid d_{j+1}\ (\text{vì}\ p\ \text{nguyên tố}). 
        \]
    \end{subproof}

    Từ đó suy ra \( n \) là lũy thừa của một số nguyên tố vì nếu tồn tại một số nguyên tố $q \ne p$ mà cũng là ước số của $n$ thì $p\mid q$ và đó là điều vô lý.
\end{soln}

\bigbreak

\begin{soln}(Cách 3)\footnotemark[\value{footnote}]
    \begin{claim*}
        \( d_i \mid d_{i+1} \) với mọi \( 1 \leq i \leq k-1 \).
    \end{claim*}
    \begin{subproof}
        Ta dùng \nameref{theorem:induction-principle} để chứng minh.
        
        Bướcc cơ sở: \( d_1 = 1 \) là hiển nhiên. Giả sử \( d_{i-1} \mid d_i \). Từ điều kiện đề bài:
        \[
            d_{i-1} \mid d_i + d_{i+1} \Rightarrow d_{i-1} \mid d_{i+1}.
        \]
        
        Ta xét:
        \[
            d_{k-i} = \frac{n}{d_{i+1}}, \quad d_{k-i+1} = \frac{n}{d_i}, \quad d_{k-i+2} = \frac{n}{d_{i-1}}.
        \]
        
        Ta suy ra:
        \[
            \frac{d_{k-i+1} + d_{k-i+2}}{d_{k-i}} = \frac{\frac{n}{d_i} + \frac{n}{d_{i-1}}}{\frac{n}{d_{i+1}}} = \frac{d_{i+1}}{d_i} + \frac{d_{i+1}}{d_{i-1}} \in \ZZ.
        \]
        suy ra \( d_i \mid d_{i+1} \), hoàn thành chứng minh.
    \end{subproof}

    Dựa vào Mệnh đề đã chứng minh, \( n \) không thể có hai thừa số nguyên tố khác nhau vì thừa số nhỏ nhất sẽ chia hết thừa số còn lại.
    Do đó, \( n \) phải là lũy thừa của một số nguyên tố, và các lũy thừa của số nguyên tố đều thỏa mãn điều kiện của bài toán.
\end{soln}

\footnotetext{\samepage \href{https://www.imo-official.org/problems/IMO2023SL.pdf}{Shortlist 2023 with solutions.}}

\end{document}