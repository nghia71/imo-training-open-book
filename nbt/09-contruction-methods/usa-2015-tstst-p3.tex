\documentclass[../09-contruction-methods.tex]{subfiles}

\begin{document}

\begin{example*}[\gls{USA 2015 TSTST}/P3]\label{example:USA-2015-TSTST-P3}[\textbf{\nameref{definition:40M}}]
	Giả sử $P$ là tập hợp tất cả các số nguyên tố, và $M$ là một tập con không rỗng của $P$.
	Giả sử rằng với mọi tập con không rỗng $\{p_1, p_2, \ldots, p_k\}$ của $M$, tất cả các ước số nguyên tố của $p_1p_2\ldots p_k + 1$ cũng thuộc $M$.
	Chứng minh rằng $M = P$.
\end{example*}

\begin{soln}(Cách 1)\footnotemark
	Giả sử ngược lại rằng tồn tại số nguyên tố $p \notin M$.
	Do điều kiện đề bài, ta biết rằng nếu lấy tích các số nguyên tố trong $M$ rồi cộng $1$, thì các ước số nguyên tố của kết quả luôn thuộc $M$.
	Ta sẽ xây dựng một dãy số trong $M$ để dẫn đến mâu thuẫn với giả thiết $p \notin M$.
	
	Xét các lớp dư modulo $p$. Gọi $X$ là tập các số nguyên tố trong $M$ mà lớp dư modulo $p$ của chúng xuất hiện vô hạn lần trong $M$,
	và $Y = M \setminus X$, tức là tập các số nguyên tố trong $M$ mà lớp dư modulo $p$ chỉ xuất hiện hữu hạn lần.
	Vì chỉ có hữu hạn lớp dư modulo $p$, nên $Y$ là hữu hạn.
	
	Đặt 
	\[
		t = 
		\begin{cases}
			1 & \text{nếu } Y = \emptyset, \\
			\prod\limits_{y \in Y} y & \text{nếu } Y \neq \emptyset.
		\end{cases}
	\]
	
	Rõ ràng $p \nmid t$, vì $p \notin M$ và $t$ là tích các phần tử của $M$.
	
	Bây giờ, ta xây dựng một dãy $\{a_n\}$ như sau:
	
	\begin{itemize}[topsep=0pt, partopsep=0pt, itemsep=0pt]
		\item Đặt $a_0 = 1$.
		\item Với $n \ge 0$, xét $ta_n + 1$ và phân tích nó thành thừa số nguyên tố:
	  	\[
	  		ta_n + 1 = p_1^{\alpha_1} p_2^{\alpha_2} \ldots p_k^{\alpha_k}.
	  	\]
		Vì $(t, ta_n + 1) = 1$, nên mọi $p_i$ đều không chia hết $t$ và do đó không thuộc $Y$, tức là $p_i \in X \subseteq M$.
	  	\item Với mỗi $p_i$, do $p_i \in X$ nên có vô hạn số nguyên tố trong $M$ đồng dư với $p_i$ modulo $p$.
		Do đó, ta có thể chọn $\alpha_i$ số nguyên tố phân biệt trong $M$, mỗi số đồng dư với $p_i \pmod{p}$, và tất cả các số này đều phân biệt.
		Gọi $a_{n+1}$ là tích của các số nguyên tố được chọn.
	\end{itemize}
	
	Rõ ràng $a_{n+1} \equiv ta_n + 1 \pmod{p}$. Vì $a_0 = 1$, nên ta có:
	\[
		a_1 \equiv t + 1 \pmod{p}, \quad a_2 \equiv t(t + 1) + 1 = t^2 + t + 1 \pmod{p}, \quad \text{v.v.}
	\]
	
	Suy ra:
	\[
		a_n \equiv t^n + t^{n-1} + \ldots + 1 \pmod{p}.
	\]
	
	Xét ba trường hợp:
	\begin{itemize}[topsep=0pt, partopsep=0pt, itemsep=0pt]
		\item Nếu $t \equiv 0 \pmod{p}$ thì $p \mid t$, mâu thuẫn với $p \notin M$.
		\item Nếu $t \equiv 1 \pmod{p}$ thì $a_p \equiv p \equiv 0 \pmod{p}$.
		\item Nếu $t \not\equiv 0,1 \pmod{p}$ thì theo công thức cấp số nhân:
		\[
			a_{p-2} \equiv \frac{t^{p-1} - 1}{t - 1} \equiv 0 \pmod{p}.
		\]
	\end{itemize}
	
	Trong cả ba trường hợp, tồn tại $n$ sao cho $a_n \equiv 0 \pmod{p}$. Nhưng điều này vô lý, vì mỗi $a_n$ là tích của các số nguyên tố thuộc $M$, nên không thể chia hết cho $p \notin M$.
	
	Vậy giả thiết ban đầu sai. Suy ra $M = P$.
\end{soln}

\footnotetext{\href{https://artofproblemsolving.com/community/c6h1062614p18497986}{Lời giải của Aiscrim} do Evan Chen viết \href{https://web.evanchen.cc/exams/sols-TSTST-2015.pdf}{lại}.}

\end{document}