\documentclass[../05-largest-exponent.tex]{subfiles}

\begin{document}

\begin{example*}[\gls{CHN 2015 TST}2/D2/P3]\label{example:CHN-2015-TST2-D2-P3}[\textbf{unrated}]
	Chứng minh rằng tồn tại vô hạn số nguyên \( n \) sao cho \( n^2 + 1 \) là số không có ước chính phương.
\end{example*}

\begin{soln}(Cách 1)\footnotemark
	Trước hết ta chứng minh khẳng định sau với mọi số nguyên tố \( p \).
	\begin{claim*}
		Phương trình $x^2 \equiv -1 \pmod{p^2}$ có không quá 2 nghiệm trong tập \( \{0,1,\dots,p^2-1\} \).
	\end{claim*}
	
	\begin{subproof}
		Trường hợp \( p = 2 \) có thể dễ dàng kiểm tra trực tiếp, nên ta giả sử \( p \) là số lẻ.
	
		Giả sử phản chứng rằng tồn tại ít nhất ba số nguyên phân biệt \( a, b, c \) sao cho:
		\[
			a^2 + 1 \equiv b^2 + 1 \equiv c^2 + 1 \equiv 0 \pmod{p^2} \implies a^2 \equiv b^2 \pmod{p^2} \implies p^2 \mid (a-b)(a+b). \quad (1)
		\]
		
		Xét hai trường hợp:
		
		\textit{Trường hợp 1:} \( p \mid a - b \). Khi đó, vì \( |a-b| < p^2 \), ta có \( p^2 \nmid a - b \). Từ (1), suy ra \( p \mid a + b \).  
		Xét tổng và hiệu:
		\[
			  p \mid (a-b) + (a+b) = 2a, \quad p \mid (a+b) - (a-b) = 2b.
		\]

		Do \( p \neq 2 \), suy ra \( p \mid a \), nhưng điều này mâu thuẫn với giả thiết \( p^2 \mid a^2 + 1 \).
	
		\textit{Trường hợp 2:} \( p \nmid a - b \). Từ (1), ta suy ra \( p^2 \mid a + b \). Tương tự, có thể chứng minh \( p^2 \mid a + c \).

		Suy ra \( p^2 \mid (a+c) - (a+b) = b - c \). Vì \( |b - c| < p^2 \), ta có \( b = c \), mâu thuẫn với giả thiết ban đầu.
	\end{subproof}
	
	Gọi \( \text{X}(n) \) và \( \text{P}_{4,1}(n) \) là hai tập hợp sau:
	\[
		\begin{aligned}
			&\text{X}(n) = \{ x \mid x^2 + 1 \text{ có ước chính phương} \}.\\
			&\text{P}_{4,1}(n) = \{ p \mid p \text{ là số nguyên tố},\ p \equiv 1 \pmod{4} \}.
		\end{aligned}
	\]

	Theo khẳng định trên, $x^2 \equiv -1 \pmod{p^2}$ trong khoảng \( [0, n-1] \) có số nghiệm không vượt quá:
	\[
		2 \cdot \frac{n}{p^2} + 2.
	\]
	
	Do đó tổng số phần tử trong \( \text{X}(n) \):
	\[
		\begin{aligned}
			|\text{X}(n)| &\le \sum_{p\in\text{P}_{4,1}(n)} \left(2 + \frac{2n}{p^2} \right)
			\le 2|\text{P}_{4,1}(n)|  + 2n \sum_{p\in\text{P}_{4,1}(n)} \frac{1}{p^2}.
		\end{aligned}
	\]

	Số lượng số nguyên tố \( p \leq n \) thỏa mãn \( p \equiv 1 \pmod{4} \) được ước lượng bởi:
	\[
		|\text{P}_{4,1}(n)| \leq 1 + \frac{n}{4}.
	\]

	Theo \nameref{theorem:alternating-series-inequality}, ta có:
	\[
		\sum_{p} \frac{2}{p^2} < \frac{1}{4} \implies 2n\sum_{p} \frac{1}{p^2} < \frac{n}{6} \implies |\text{X}(n)| \leq 2 + \frac{2n}{3}.
	\]
	
	Từ đó, số phần tử \( x \) nhỏ hơn \( n \) sao cho \( x^2 + 1 \) không có ước chính phương ít nhất là:
	\[
		n - |\text{X}(n)| \geq \frac{n}{3} - 2.
	\]

	Vì \( \frac{n}{3} - 2 \) có thể lớn tùy ý khi \( n \) tăng, nên có vô hạn số \( n \) sao cho \( n^2 + 1 \) không có ước chính phương.
\end{soln}

\footnotetext{\href{https://artofproblemsolving.com/community/c6h1064571p27346813}{Lời giải của rafayaashary1.}}

\end{document}