\ifshowproblemandsoln
\ifshowproblem\begin{problem}[\gls{IMO 2015 SL}/P1]\label{problem:IMO-2015-SL-P1}\fi
\ifshowsoln\begin{problem}[\nameref{problem:IMO-2015-SL-P1}]\fi
    Xác định tất cả các số nguyên dương \( M \) sao cho dãy \( a_0, a_1, a_2, \ldots \) được định nghĩa bởi:
    \[
        a_0 = M + \frac{1}{2} \qquad \text{và} \qquad a_{k+1} = a_k \lfloor a_k \rfloor \quad \text{với } k = 0, 1, 2, \ldots
    \]
    chứa ít nhất một số nguyên trong dãy.    
\end{problem}
\fi

\ifshowsoln
\begin{soln}[Lời giải 1.]\footnotemark
    Đặt \( b_k = 2a_k \). Khi đó:
    \[
        b_{k+1} = 2a_{k+1} = 2a_k \cdot \lfloor a_k \rfloor = b_k \cdot \left\lfloor \frac{b_k}{2} \right\rfloor.
    \]

    Do \( b_0 = 2a_0 = 2M + 1 \) là số nguyên suy ra \( b_k \in \mathbb{Z} \) với mọi \( k \ge 0 \).

    Giả sử dãy \( a_k \) không bao giờ nhận giá trị nguyên suy ra \( b_k \) là số lẻ với mọi \( k \). Khi đó:
    \[
        b_{k+1} = b_k \cdot \left\lfloor \frac{b_k}{2} \right\rfloor = \frac{b_k(b_k - 1)}{2}. \tag{1}
    \]

    Trừ hai vế của (1) cho 3:
    \[
        b_{k+1} - 3 = \frac{b_k(b_k - 1)}{2} - 3 = \frac{(b_k - 3)(b_k + 2)}{2}. \tag{2}
    \]

    Giả sử \( b_0 - 3 > 0 \). Khi đó \( b_k - 3 > 0 \) với mọi \( k \), và \( b_k - 3 \) luôn là số chẵn.

    Gọi \( c_k \) là số mũ lớn nhất của 2 chia hết \( b_k - 3 \). Khi đó, do \( b_k + 2 \) lẻ, nên từ (2):
    \[
        b_{k+1} - 3 = \frac{(b_k - 3)(b_k + 2)}{2} \implies c_{k+1} = c_k - 1.
    \]

    Dẫn đến dãy \( c_k \) giảm dần không chặn dưới trong tập số nguyên dương suy ra mâu thuẫn.

    Vậy \( b_0 - 3 \le 0 \implies 2M + 1 \le 3 \implies M \le 1 \). Ta kiểm tra:

    - Với \( M = 1 \implies a_0 = \frac{3}{2} \implies a_k = \frac{3}{2} \) hằng suy ra không có số nguyên trong dãy.

    - Với \( M = 2 \implies a_0 = \frac{5}{2} \implies a_1 = \frac{5}{2} \cdot 2 = 5 \in \mathbb{Z} \).

    Vậy nghiệm là tất cả \( M \ge 2 \).
\end{soln}
\footnotetext{\href{http://www.imo-official.org/problems/IMO2015SL.pdf}{Lời giải chính thức.}}

\begin{soln}[Lời giải 2.]
    Ta tiếp tục từ phương trình (1):
    \[
        b_{k+1} = \frac{b_k(b_k - 1)}{2}.
    \]

    Ta sẽ chứng minh rằng nếu \( b_0 = 2M + 1 = 3 \), thì \( b_k = 3 \) với mọi \( k \), tức \( M = 1 \). 
    Hơn nữa, nếu \( b_0 > 3 \), thì dãy sẽ có giá trị chẵn tại một thời điểm.

    Đặt mệnh đề: với mọi \( m \ge 1 \), nếu \( b_k \equiv 3 \pmod{2^m} \) với mọi \( k \), thì \( b_k = 3 \).

    \textit{Cơ sở:} Với \( m = 1 \), ta có \( b_k \) là số lẻ suy ra \( b_k \equiv 1 \) hoặc \( 3 \pmod{4} \), nhưng chỉ \( 3 \) cố định.

    \textit{Bước quy nạp:} Giả sử \( b_k \equiv 3 \pmod{2^m} \implies b_k = 2^m d_k + 3 \). Thế vào:
    \[
        b_{k+1} = \frac{(2^m d_k + 3)(2^m d_k + 2)}{2} \equiv 3 \pmod{2^m}.
    \]

    Ta chứng minh được \( d_k \) chẵn suy ra \( b_k \equiv 3 \pmod{2^{m+1}} \). Bằng quy nạp, \( b_k \equiv 3 \pmod{2^m} \) với mọi \( m \implies b_k = 3 \).

    Suy ra: \( b_0 = 3 \implies M = 1 \) là trường hợp duy nhất không sinh ra số nguyên trong dãy.

    \textbf{Kết luận:} Các giá trị \( M \) thỏa mãn yêu cầu là:
    \[
        \boxed{M \ge 2}.
    \]
\end{soln}    
\fi

\ifshowhint
\begin{hint*}[\nameref{problem:IMO-2015-SL-P1}]
    Nhân đôi các phần tử trong dãy để loại mẫu số, rồi xét điều kiện để dãy không chứa số nguyên. Phân tích chia hết theo 2 sẽ giúp chỉ ra mâu thuẫn.
\end{hint*}
\fi

\ifshowremark
\begin{remark*}
    Đánh giá [\textbf{\nameref{definition:20M}}]
\end{remark*}
\newpage
\fi