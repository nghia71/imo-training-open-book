\ifshowproblemandsoln
\ifshowproblem\begin{problem}[\gls{USA 2015 JMO}/P2]\label{problem:USA-2015-JMO-P2}\fi
\ifshowsoln\begin{problem}[\nameref{problem:USA-2015-JMO-P2}]\fi
    Giải phương trình sau trong tập số nguyên:
    \[
        x^2 + xy + y^2 = \left( \frac{x + y}{3} + 1 \right)^3.
    \]
\end{problem}
\fi

\ifshowsoln
\begin{soln}[Lời giải 1.]\footnotemark
    Ta trước tiên nhận thấy rằng hai vế của phương trình đều phải là số nguyên, nên \( \frac{x + y}{3} \) phải là một số nguyên.

    Do đó, ta đặt \( x + y = 3t \), với \( t \in \mathbb{Z} \).

    Khi đó:
    \[
        \begin{aligned}
            &(3t)^2 - xy = (t + 1)^3 \implies 9t^2 + x(x - 3t) = t^3 + 3t^2 + 3t + 1\\
            &4x^2 - 12xt + 9t^2 = 4t^3 - 15t^2 + 12t + 4 \implies (2x - 3t)^2 = (t - 2)^2(4t + 1)\\
        \end{aligned}
    \]
    
    Ta thấy \( 4t + 1 \) là bình phương của một số lẻ, nên đặt:
    \[
        4t + 1 = (2n + 1)^2 = 4n^2 + 4n + 1 \implies t = n^2 + n
    \]

    Thay vào biểu thức:
    \[
        (2x - 3n^2 - 3n)^2 = [(n^2 + n - 2)(2n + 1)]^2 \implies 2x - 3n^2 - 3n = \pm (2n^3 + 3n^2 - 3n - 2)
    \]

    Suy ra hai trường hợp:
    \[
        \begin{aligned}
            &x = n^3 + 3n^2 - 1 \quad \text{hoặc} \quad x = -n^3 + 3n + 1\\
            &y = x + y - x = 3t - x = (n^3 + 3n^2 - 1 + (-n^3 + 3n + 1)) = \text{trường hợp đối xứng}
        \end{aligned}
    \]

    Vậy tập nghiệm nguyên là:
    \[
        \left( n^3 + 3n^2 - 1,\ -n^3 + 3n + 1 \right)
        \cup
        \left( -n^3 + 3n + 1,\ n^3 + 3n^2 - 1 \right),
        \quad \text{với } n \in \mathbb{Z}.
    \]
\end{soln}
\footnotetext{\href{https://artofproblemsolving.com/wiki/index.php/2015_USAJMO_Problems/Problem_2}{Lời giải từ AoPS.}}

\begin{soln}[Lời giải 2.]\footnotemark
    Ta giải phương trình sau trên tập số nguyên:
    \[
        x^2 + xy + y^2 = \left( \frac{x + y}{3} + 1 \right)^3.
    \]

    Ta sử dụng thủ thuật đặt \( a = x + y \) và \( b = x - y \). Khi đó, phương trình trở thành:
    \[
        \frac{1}{4} \left( (a + b)^2 + (a + b)(a - b) + (a - b)^2 \right) = \left( \frac{a}{3} + 1 \right)^3,
    \]
    với \( a, b \in \mathbb{Z} \) có cùng tính chẵn lẻ.

    Biến đổi phương trình:
    \[
        3a^2 + b^2 = 4\left( \frac{a}{3} + 1 \right)^3.
    \]

    Phương trình này cho thấy \( 3 \mid a \), do đó đặt \( a = 3c \). Một cách kỳ diệu, điều này biến phương trình thành:
    \[
        b^2 = (c - 2)^2(4c + 1).
    \]

    Như vậy, nghiệm sẽ thỏa mãn \( 4c + 1 = m^2 \), với \( m \) là số lẻ.

    Từ đó ta có:
    \[
        x = \frac{1}{8}\left( 3(m^2 - 1) \pm (m^3 - 9m) \right), \quad
        y = \frac{1}{8}\left( 3(m^2 - 1) \mp (m^3 - 9m) \right).
    \]

    Do điều kiện chia hết theo modulo 8, hai biểu thức trên luôn cho nghiệm nguyên, nên đây là đường cong nghiệm đầy đủ.

    Thực tế, đặt \( m = 2n + 1 \), ta thu được đường cong đẹp hơn:
    \[
        x = n^3 + 3n^2 - 1, \quad y = -n^3 + 3n + 1,
    \]
    cùng với các hoán vị của chúng.

    Với \( n = 0, 1, 2, 3 \), ta có các nghiệm đầu tiên là:
    \[
        (-1, 1),\quad (3, 3),\quad (19, -1),\quad (53, -17),
    \]
    và các hoán vị.
\end{soln}
\footnotetext{\href{https://web.evanchen.cc/exams/JMO-2015-notes.pdf}{Từ lời giải do Evan Chen biên soạn.}}
\fi

\ifshowhint
\begin{hint*}[\nameref{problem:USA-2015-JMO-P2}]
    Hãy quan sát rằng vế phải của phương trình chứa biểu thức \( \frac{x + y}{3} \), do đó bạn nên thử đặt \( x + y = 3t \). 
    Sau đó, biến đổi phương trình để đưa về dạng bình phương hoàn chỉnh và tìm cách biểu diễn dưới dạng tích.
\end{hint*}
\fi

\ifshowremark
\begin{remark*}
    Đánh giá [\textbf{\nameref{definition:15M}}]
\end{remark*}
\newpage
\fi