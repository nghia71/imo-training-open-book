\documentclass[../2015-n-s.tex]{subfiles}

\begin{document}

\begin{soln}[\autoref{problem:RUS-2015-TST-D10-P2}][\gls{RUS 2015 TST}/D10/P2][\footnotemark]

    Ta biết rằng:
    \[
        \sum_{i=1}^{p-1} i = \frac{(p-1)p}{2} \equiv 1 \Mod{p}, \quad \prod_{i=1}^{p-1} i \equiv -1 \Mod{p} \quad \text{(Định lý Wilson)}
    \]
    
	Gọi \( S \) là một tập con không rỗng của \( \{1, 2, \ldots, p-1\} \). Khi đó, phần bù của \( S \) là \( S^c = \{1, \ldots, p-1\} \setminus S \).
	Bài toán tương đương với việc tìm \( S \) sao cho:
    \[
        \sum_{i \in S} i \equiv \prod_{j \in S^c} j \Mod{p}.
    \]
    
	Đặt \( A = \sum_{i \in S} i, \quad B = \prod_{i \in S} i \), khi đó:
    \[
		\sum_{i \in S^c} i \equiv 1 - A \Mod{p}, \quad
		\prod_{i \in S^c} i \equiv \frac{-1}{B} \Mod{p}.
    \]
	
	Ta sẽ xây dựng \( S \) thỏa mãn: $\displaystyle A \equiv \frac{-1}{B} \Mod{p} \quad \Longleftrightarrow \quad AB \equiv -1 \Mod{p}.$

    \textit{Trường hợp 1:} Nếu \( p \equiv 1 \Mod{4} \). Khi đó tồn tại \( a \in \mathbb{F}_p \) sao cho \( a^2 \equiv -1 \Mod{p} \). Lấy \( S = \{a\} \), ta có:
    \[
        A = a, \quad B = a \Rightarrow AB = a^2 \equiv -1 \Mod{p}.
    \]

    \textit{Trường hợp 2:} Nếu \( p \equiv 3 \Mod{4} \), thì \( p - 1 \equiv 2 \Mod{4} \), nên tồn tại số nguyên tố lẻ \( q \mid (p - 1) \) (do \( p \ge 5 \)).

    Khi đó, tồn tại phần tử sinh \( a \in \mathbb{F}_p \) sao cho \( \mathrm{ord}_p(a) = q \). Xét tập:
    \[
        S = \left\{a^{\frac{q-1}{2}}, a^{\frac{q-3}{2}}, \ldots, a, a^{-1}, a^{-3}, \ldots, a^{-\frac{q-1}{2}}\right\},\quad |S| = q - 1.
    \]

    Các phần tử đi thành cặp nghịch đảo, nên tích của \( S \) là: $\displaystyle \prod_{i \in S} i \equiv 1 \Mod{p}.$

	Ta nhân cả tổng với \( a^{\frac{q-1}{2}} \), thu được:
	\[
		a^{\frac{q-1}{2}} \sum_{i \in S} i = a^{q-1} + a^{q-2} + \cdots + 1 \equiv 0 \Mod{p},
	\]
	vì đây là tổng cấp số nhân với công bội \( a \), số hạng \( q \), nên tổng bằng \( \frac{a^q - 1}{a - 1} \equiv 0 \Mod{p} \).

    Do đó:
    \[
        \sum_{i \in S} i \equiv -1 \Mod{p}, \quad \prod_{i \in S} i \equiv 1 \Mod{p} \Rightarrow AB \equiv -1 \Mod{p}.
    \]

    \vspace{1em}
	\textbf{[\nameref{definition:25M}]}\index{25M}. \nameref{theorem:wilson}. \nameref{theorem:geometric-sum-mod-p}. \nameref{theorem:square-root-of-minus-one}.
    \nameref{theorem:existence-primitive-root}. \nameref{theorem:multiplicative-group-structure}.
    \nameref{lemma:order-preserved}. \nameref{lemma:order-of-power}.
\end{soln}

\footnotetext{\href{https://artofproblemsolving.com/community/c6h3057483p28254744}{Dựa theo lời giải của \textbf{IAmTheHazard}.}}

\end{document}