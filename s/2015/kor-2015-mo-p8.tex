\documentclass[../2015-n-s.tex]{subfiles}

\begin{document}

\begin{soln}[\autoref{problem:KOR-2015-MO-P8}][\gls{KOR 2015 MO}/P8][Cách 1][\footnotemark]

	Với các giá trị đặc biệt như \( n = p \) nguyên tố, \( n = p^2 \), hoặc \( n = pq \) với \( p, q \) là các số nguyên tố, ta có thể kiểm tra trực tiếp.
	Vì vậy, ta giả sử từ đây rằng \( n \) không thuộc các dạng này.

	Với mỗi số \( a \) sao cho \( \gcd(a, n) = 1 \), thì \( \gcd(n - a, n) = 1 \). Trong cặp \( (a, n - a) \), một số nhỏ hơn \( \frac{n}{2} \), số còn lại lớn hơn.

	Giả sử \( a < \frac{n}{2} \), ta có:
	\[
		\left| \frac{n}{2} - a \right| + \left| \frac{n}{2} - (n - a) \right| = n - 2a.
	\]

	Suy ra:
	\[
		\sum_{i=1}^k \left| a_i - \frac{n}{2} \right| = \frac{n\varphi(n)}{2} - 2S, \tag{1}
	\]
	trong đó \( S \) là tổng các số \( < \frac{n}{2} \) và nguyên tố cùng nhau với \( n \).

	Gọi \( p \) là ước nguyên tố nhỏ nhất của \( n \), đặt \( m = \frac{n}{p} \). Gọi \( T \) là tổng các số \( < m \) nguyên tố cùng nhau với \( m \), ta có:
	\[
		T = \frac{m\varphi(m)}{2} \quad \text{và} \quad \varphi(m) \ge 2p \implies S \ge T \ge pm = n. \tag{2}
	\]

	Thay (2) vào (1):
	\[
		\sum_{i=1}^k \left| a_i - \frac{n}{2} \right| \le \frac{n\varphi(n)}{2} - 2n = \frac{n(k - 4)}{2}.
	\]

	\vspace{1em}
	\textbf{[\nameref{definition:30M}]}\index{30M}.
	\textbf{Tham chiếu:} \nameref{definition:euler-totient} \nameref{theorem:sum-coprime-m}.
\end{soln}

\footnotetext{\samepage \href{https://artofproblemsolving.com/community/c6h1158071p5504225}{Lời giải của \textbf{andria}.}}

\newpage

\begin{soln}[\autoref{problem:KOR-2015-MO-P8}][\gls{KOR 2015 MO}/P8][Cách 2][\footnotemark]

	Ta nhận thấy rằng nếu \( a_i \) thuộc tập thì \( n - a_i \) cũng thuộc tập, tổng hai số là \( n \). Do đó \( k \) chẵn và:
	\[
		a_{k/2} < \frac{n}{2} < a_{k/2+1}, \quad \sum_{i=1}^k a_i = \frac{nk}{2}. \tag{1}
	\]

	Ta có:
	\[
		\sum_{i=1}^{k} \left| a_i - \frac{n}{2} \right| = \sum_{i=1}^{k/2} \left(\frac{n}{2} - a_i\right) + \sum_{i=k/2+1}^{k} \left(a_i - \frac{n}{2}\right)
	\]

	Kết hợp với (1), bất đẳng thức tương đương:
	\[
		S = \sum_{i=1}^{k/2} a_i > n.
	\]

	Ta cần chứng minh tổng các số \( < \frac{n}{2} \) và nguyên tố cùng nhau với \( n \) lớn hơn \( n \).

	Gọi \( f(n) \approx \frac{n}{3} \), được điều chỉnh để tránh chia hết cho 3:
	\[
		f(n) = 
		\begin{cases}
			\frac{n \pm 1}{3}, & n \equiv \mp 1 \Mod{3} \\
			\frac{n}{3} \pm 1, & n \equiv 0 \Mod{3}
		\end{cases}
		\implies \frac{n}{3} - 1 \le f(n) \le \frac{n}{3} + 1,\ \gcd(f(n), n) = 1
	\]

	\textit{Trường hợp 1: \( n \) lẻ.} Nếu \( n < 30 \), kiểm tra trực tiếp. Với \( n > 30 \), đặt \( n = 2^k + m \). Khi đó:
	\[
		S \ge 2^{k-1} - 1 + \frac{n}{3} - 1 + \frac{n - 1}{2} = \frac{13n}{12} - \frac{5}{2} > n
	\]

	\textit{Trường hợp 2: \( n \equiv 0 \mod 4 \).} Khi đó:
	\[
		S = \frac{1}{2} \cdot \frac{n}{2} \cdot \frac{k}{2} = \frac{nk}{8} > n \quad (\text{vì } k > 8)
	\]

	\textit{Trường hợp 3: \( n = 4m + 2 \).} Với \( m > 7 \), ta có:
	\[
		S \ge 1 + m + \frac{4m + 2}{3} - 1 + 2m - 1 = \frac{13m}{3} - \frac{1}{3} > 4m + 2 = n
	\]

	\textbf{Kết luận:} Trong cả ba trường hợp, ta có:
	\[
		\sum_{i=1}^{k/2} a_i > n \implies \sum_{i=1}^k \left| a_i - \frac{n}{2} \right| < \frac{n(k - 4)}{2}.
	\]

	\vspace{1em}
	\textbf{[\nameref{definition:30M}]}\index{30M}.
	\textbf{Tham chiếu:} \nameref{definition:euler-totient}.
\end{soln}

\footnotetext{\samepage \href{https://artofproblemsolving.com/community/c6h1158071p5909876}{Lời giải của \textbf{rkm0959}.}}

\end{document}